---
import {
  Footer,
  Nav,
  HomeSection,
  AboutMeSection,
  ProyectSection,
} from '../components/index.astro';
import { Page } from '../layouts/index.astro';
---

<Page title='Emanuel Palacio'>
  <Nav />
  <main>
    <HomeSection />
    <AboutMeSection />
    <ProyectSection />
  </main>
  <Footer />
</Page>
<style>
  main {
    display: inline-flex;
    flex-direction: column;
    min-height: 100%;
    margin-left: 80px;
  }
</style>
<script>
  const home = document.querySelector<HTMLElement>('#home');
  const textBoxes = document.querySelectorAll<HTMLElement>('#TextBoxes > g');
  const astro = document.querySelector<HTMLElement>('#Astro');
  const react = document.querySelector<HTMLElement>('#React');
  const proyects = document.querySelector<HTMLElement>('#proyects');
  const cards = document.querySelectorAll<HTMLElement>('.card');

  const threshold = 0.5;

  const observer = new IntersectionObserver(
    (entries) => {
      console.log('ðŸš€ ~ file: index.astro:41 ~ entries:', entries);
      entries.forEach((entry) => {
        if (entry.target.id === 'home') {
          if (entry.isIntersecting) {
            const elementsToAnimate = [...textBoxes, astro, react];
            elementsToAnimate.forEach((element) => {
              element.style.animationPlayState = 'running';
            });
          }
        }

        if (entry.target.id === 'proyects') {
          if (entry.isIntersecting) {
            for (let index = 0; index < cards.length; index++) {
              cards[index].style.animationPlayState = 'running';
            }
          }
        }
      });
    },
    { threshold },
  );
  observer.observe(home);
  observer.observe(proyects);
</script>
