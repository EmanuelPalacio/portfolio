---
import {
  Footer,
  Nav,
  HomeSection,
  AboutMeSection,
  ProyectSection,
} from '../components/index.astro';
import { Page } from '../layouts/index.astro';
---

<Page title='Emanuel Palacio'>
  <Nav />
  <main>
    <HomeSection />
    <AboutMeSection />
    <ProyectSection />
  </main>
  <Footer />
</Page>
<style>
  main {
    display: inline-flex;
    flex-direction: column;
    min-height: 100%;
    margin-left: 80px;
  }
</style>
<script>
  const home = document.querySelector('#home');
  const aboutMe = document.querySelector('#aboutMe');
  const textBoxes = document.querySelector('#TextBoxes').children;
  const astro = document.querySelector('#Astro');
  const react = document.querySelector('#React');

  const threshold = 0.25;

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const elementsToAnimate = [...textBoxes, astro, react];
          console.log(
            'ðŸš€ ~ file: index.astro:43 ~ entries.forEach ~ elementsToAnimate:',
            elementsToAnimate,
          );
          for (const element of elementsToAnimate) {
            element.style.animationPlayState = 'running';
          }
        }
      });
    },
    { threshold },
  );
  observer.observe(home);
  observer.observe(aboutMe);
</script>
